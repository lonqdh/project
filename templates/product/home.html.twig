{% extends "base.html.twig" %}

{% block body %}
    <div class="container mt-3 text-center">
        <h1 class="text text-danger">
           DiamondBoiz Clothing Store
        </h1>
        <div class="row">
        {# sắp xếp #}
			<div class="col-md-5">
				<div class="row">
					<div class="col">
						<h5 class="text text-primary">Sort product</h5>
					</div>
					<div class="col">
						<div class="form-group">
							<select class="form-control" onchange="window.location.href=this.value">
								<option>Select one</option>
								<option value="{{ path('sort_price_ascending') }}">Price Ascending</option>
								<option value="{{ path('sort_price_descending') }}">Price Descending</option>
								<option value="{{ path('sort_bestselling_ascending') }}">Best Sellers</option>
                            </select>
						</div>
					</div>
				</div>
			</div>
        {# tìm kiếm #}
			<div class="col-md-7">
				<div class="row">
					<div class="col">
						<h5 class="text text-primary">Search book</h5>
					</div>
					<div class="col">
						<div class="form-group">
							<form action="{{ path('search_book') }}" method="post">
								<input class="form-control" type="search" name="keyword" placeholder="Enter book title" required maxlength="10">
							</form>
						</div>
					</div>
				</div>
			</div>
        </div>
        {% if products | length == 0 %}
            <h1 class="text text-danger mt-4 mb-4">
                No product found!
            </h1>
        {% else %}
            <p class="text-info h3 mt-3">
                Total products : {{products | length}}
            </p>
            
            <div class="card-group justify-content-center align-items-center">
                <div class="row">
                    {% for product in products %}
                        {% if products | length < 4 %}
                            <div class="col mt-4 mt-4">
                        {% else %}
                            <div class="col-md-3 mt-4">
                        {% endif %}
                                <div class="card">
                                    <div class="box">
                                    <a href="{{ path('product_detail', {'id' : product.id })}}">
										<img src="{{ product.image }}" width="150" height="150">
									</a>
                                    <h3 class="text text-success">
										{{ product.name }}
									</h3>
                                {% if product.quantity >= 1 %}
                                    <h5 class=" price">
                                        Price : $ {{product.price}} 
                                    </h5>
                                    <h5 class="text text-danger">
                                        Quantity : {{product.quantity}}
                                    </h5> 
                                 {# <div class="card card-footer mt-1">  #}
										{# gửi dữ liệu sang action addToCart trong CartController #}
										 <form action="{{ path('add_to_cart')}}" method="post">
											<input type="hidden" name="productid" value="{{ product.id }}">
											<input type="number" name="quantity" min="1" max="{{ product.quantity }}">
											<br>
											<input class="button" type="submit" value="Add to cart">
										</form> 
                                {% else %}
                                    <h5 class="price">
											Price : $ {{product.price}} 
										</h5>
										<h5 class="text text-danger">
											Out of stock
										</h5>
                                {% endif %}
                                {# <div class="card">
                                    <img src="{{product.image}}" alt="Long Dep Trai" width="150" height="150">
                                    <h1>{{product.name}}</h1>
                                    <p class="price">${{product.price}}</p>
                                    <p>Quantity : {{product.quantity}}</p>
                                    <p><button>Add to Cart</button></p>
                                </div> #}
                                    
                                
                                {# </div> #}
                                </div>
                                </div>
                            </div>
                        
                        
                        
                        
                        
                    {% endfor %}
                
                </div>    
            
            
            </div>

        {% endif %}
    
    
    
    </div>




{% endblock %}

